<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification --><meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84">
<title>Defining Custom Tuner • mlr3tuning</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<script src="../extra.js"></script><meta property="og:title" content="Defining Custom Tuner">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tuning-01-fitness-function.html">Introduction to Fitness Functions</a>
    </li>
    <li>
      <a href="../articles/tuning-02-tuner.html">Tuning Hyperparameters</a>
    </li>
    <li>
      <a href="../articles/tuning-03-custom-tuner.html">Defining Custom Tuner</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/mlr3tuning">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Defining Custom Tuner</h1>
                        <h4 class="author">Daniel Schalk</h4>
            
      
      <!--The 'toc' block was inserted manually by @pat-s. It triggeres the inline ToC in the vignettes.-->
            <div id="toc">
      <h3 class="hasAnchor">
<a href="#toc" class="anchor"></a>Table of Contents</h3>
      <ul>
<li><a href="#basis-of-tuning">Basis of Tuning</a></li>
      <li><a href="#define-objective">Define Objective</a></li>
      <li><a href="#call-the-optimizer">Call the Optimizer</a></li>
      <li><a href="#terminator-of-custom-tuner">Terminator of Custom Tuner</a></li>
      <li><a href="#write-new-class">Write New Class</a></li>
      <li><a href="#run-custom-tuner">Run Custom Tuner</a></li>
      </ul>
</div>
      
      <small>Source: <a href="https://github.com/mlr-org/mlr3tuning/blob/master/vignettes/tuning-03-custom-tuner.Rmd"><code>vignettes/tuning-03-custom-tuner.Rmd</code></a></small>

    </div>

    
    
<div class="contents">
<p><code>mlr3tuning</code> is an extension of <code>mlr3</code> that includes tuning.</p>
<ul>
<li>Goal: Define custom class with a custom tuner</li>
</ul>
<div id="basis-of-tuning" class="section level2">
<h2 class="hasAnchor">
<a href="#basis-of-tuning" class="anchor"></a>Basis of Tuning</h2>
<p>As mentioned in the <code>tuning-01-fitness-function</code> vignette, we have to define a <code>[FitnessFunction]</code> object to define the hyperparameter space as well as the evaluation technique that is used to estimate the generalization error:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">task =<span class="st"> </span>mlr3<span class="op">::</span>mlr_tasks<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"spam"</span>)</a>
<a class="sourceLine" id="cb1-2" title="2">learner =<span class="st"> </span>mlr3<span class="op">::</span>mlr_learners<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"classif.rpart"</span>)</a>
<a class="sourceLine" id="cb1-3" title="3">learner<span class="op">$</span>predict_type =<span class="st"> "prob"</span></a>
<a class="sourceLine" id="cb1-4" title="4">resampling =<span class="st"> </span>mlr3<span class="op">::</span>mlr_resamplings<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"holdout"</span>)</a>
<a class="sourceLine" id="cb1-5" title="5">measures =<span class="st"> </span>mlr3<span class="op">::</span>mlr_measures<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">mget</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"classif.auc"</span>, <span class="st">"classif.ce"</span>))</a>
<a class="sourceLine" id="cb1-6" title="6">task<span class="op">$</span>measures =<span class="st"> </span>measures</a>
<a class="sourceLine" id="cb1-7" title="7">param_set =<span class="st"> </span>paradox<span class="op">::</span>ParamSet<span class="op">$</span><span class="kw">new</span>(</a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="dt">params =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb1-9" title="9">    paradox<span class="op">::</span>ParamDbl<span class="op">$</span><span class="kw">new</span>(<span class="st">"cp"</span>, <span class="dt">lower =</span> <span class="fl">0.001</span>, <span class="dt">upper =</span> <span class="fl">0.1</span>)</a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="co"># paradox::ParamInt$new("minsplit", lower = 2, upper = 5)</span></a>
<a class="sourceLine" id="cb1-11" title="11">  )</a>
<a class="sourceLine" id="cb1-12" title="12">)</a>
<a class="sourceLine" id="cb1-13" title="13"></a>
<a class="sourceLine" id="cb1-14" title="14">ff =<span class="st"> </span>FitnessFunction<span class="op">$</span><span class="kw">new</span>(task, learner, resampling, param_set)</a></code></pre></div>
</div>
<div id="define-objective" class="section level2">
<h2 class="hasAnchor">
<a href="#define-objective" class="anchor"></a>Define Objective</h2>
<ul>
<li>Return negative performance measure in case of optimization (like the AUC)</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">blackBoxFun =<span class="st"> </span><span class="cf">function</span> (x, ff) {</a>
<a class="sourceLine" id="cb2-2" title="2">  x =<span class="st"> </span>mlr3misc<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/mlr3misc/topics/set_names">set_names</a></span>(x, <span class="dt">nm =</span> ff<span class="op">$</span>param_set<span class="op">$</span><span class="kw">ids</span>())</a>
<a class="sourceLine" id="cb2-3" title="3">  ff<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/eval">eval</a></span>(x)</a>
<a class="sourceLine" id="cb2-4" title="4">  performance =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unlist">unlist</a></span>(ff<span class="op">$</span>bmr<span class="op">$</span>data[.N]<span class="op">$</span>performance)[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="cf">if</span> (<span class="op">!</span><span class="st"> </span>ff<span class="op">$</span>task<span class="op">$</span>measures[[<span class="dv">1</span>]]<span class="op">$</span>minimize)</a>
<a class="sourceLine" id="cb2-6" title="6">    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/function">return</a></span> (<span class="op">-</span>performance)</a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/function">return</a></span> (performance)</a>
<a class="sourceLine" id="cb2-8" title="8">}</a></code></pre></div>
<p>This function ..</p>
<ul>
<li>.. runs the fitness function <code>ff</code> for the parameter value <code>x</code>.</li>
<li>.. evaluates the learner using the given <code>resampling</code> object and adds the resampling result to the benchmark result object of the fitness function .</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># blackBoxFun(c(cp = 0.05, minsplit = 5), ff)</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">blackBoxFun</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dt">cp =</span> <span class="fl">0.05</span>), ff)</a>
<a class="sourceLine" id="cb3-3" title="3">ff<span class="op">$</span>bmr<span class="op">$</span><span class="kw">aggregated</span>()</a>
<a class="sourceLine" id="cb3-4" title="4"></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co"># blackBoxFun(c(cp = 0.2, minsplit = 3), ff)</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="kw">blackBoxFun</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dt">cp =</span> <span class="fl">0.2</span>), ff)</a>
<a class="sourceLine" id="cb3-7" title="7">ff<span class="op">$</span>bmr<span class="op">$</span><span class="kw">aggregated</span>()</a></code></pre></div>
</div>
<div id="call-the-optimizer" class="section level2">
<h2 class="hasAnchor">
<a href="#call-the-optimizer" class="anchor"></a>Call the Optimizer</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(GenSA)</a>
<a class="sourceLine" id="cb4-2" title="2">res =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/GenSA/topics/GenSA">GenSA</a></span>(<span class="dt">fn =</span> blackBoxFun, <span class="dt">lower =</span> param_set<span class="op">$</span>lower, <span class="dt">upper =</span> param_set<span class="op">$</span>upper, <span class="dt">ff =</span> ff)</a></code></pre></div>
</div>
<div id="terminator-of-custom-tuner" class="section level2">
<h2 class="hasAnchor">
<a href="#terminator-of-custom-tuner" class="anchor"></a>Terminator of Custom Tuner</h2>
<p>To define a custom tuner class we also have to think about how the terminator are expressed by <code>GenSA</code>. To keep it simple we are just using the evaluations terminator to control the tuning behavior.</p>
<p>The number of evaluations of the fitness function can be controlled by <code>max.call</code>. However, by setting <code>max.call</code> we don’t get the real number of evaluations since <code>GenSA</code> finishes one iteration first and then stops. Therefore, it might happen that we specify 120 evaluation as maximum, but the algorithm calls the fitness function 126 times.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">res =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/GenSA/topics/GenSA">GenSA</a></span>(<span class="dt">fn =</span> blackBoxFun, <span class="dt">lower =</span> param_set<span class="op">$</span>lower, <span class="dt">upper =</span> param_set<span class="op">$</span>upper,</a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="dt">control =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">max.call =</span> 60L), <span class="dt">ff =</span> ff)</a></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">res<span class="op">$</span>counts</a></code></pre></div>
</div>
<div id="write-new-class" class="section level2">
<h2 class="hasAnchor">
<a href="#write-new-class" class="anchor"></a>Write New Class</h2>
<p>Instead of running <code>GenSA</code> with our custom objective, we now want to write a class to use the whole <code>mlr3</code> infrastructure for the custom tuner.</p>
<p>Basically, each tuner consists of the constructor (the <code>$new()</code> initialization) and a <code>$tune_step()</code> method. The major part of custom tuning is already done by defining the objective that uses the fitness function. The last step now is to bring the objective together with the terminator. Since <code>mlr3</code> is written with <code>R6</code> we load the package:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(R6)</a></code></pre></div>
<p>For our custom tuner the class skeleton looks like this:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">TunerGridSearch =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/R6/topics/R6Class">R6Class</a></span>(<span class="st">"TunerGenSA"</span>,</a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="dt">inherit =</span> Tuner,</a>
<a class="sourceLine" id="cb8-3" title="3">  <span class="dt">public =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb8-4" title="4">    <span class="dt">initialize =</span> <span class="cf">function</span>(ff, terminator) { ... }</a>
<a class="sourceLine" id="cb8-5" title="5">  ),</a>
<a class="sourceLine" id="cb8-6" title="6">  <span class="dt">private =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb8-7" title="7">    <span class="dt">tune_step =</span> <span class="cf">function</span>() { ... }</a>
<a class="sourceLine" id="cb8-8" title="8">  )</a>
<a class="sourceLine" id="cb8-9" title="9">)</a></code></pre></div>
<p>Finally, we have to define the two functions:</p>
<p><code>$initialize()</code>: - Checks: for GenSA everything needs to be a double or integer</p>
<p><code>$tune_step()</code>: - bla</p>
<p>To keep it simple we are just using the evaluation terminator here</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">TunerGenSA =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/R6/topics/R6Class">R6Class</a></span>(<span class="st">"TunerGenSA"</span>,</a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="dt">inherit =</span> Tuner,</a>
<a class="sourceLine" id="cb9-3" title="3">  <span class="dt">public =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb9-4" title="4">    <span class="dt">GenSA_res =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb9-5" title="5">    <span class="dt">initialize =</span> <span class="cf">function</span>(ff, evals, ...) {</a>
<a class="sourceLine" id="cb9-6" title="6">      <span class="cf">if</span> (<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/any">any</a></span>(param_set<span class="op">$</span>storage_type <span class="op">!=</span><span class="st"> "numeric"</span>)) {</a>
<a class="sourceLine" id="cb9-7" title="7">        logger<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/logger/topics/log_level">log_error</a></span>(<span class="st">"Parameter types needs to be numeric"</span>, <span class="dt">namespace =</span> <span class="st">"mlr3"</span>)</a>
<a class="sourceLine" id="cb9-8" title="8">      }</a>
<a class="sourceLine" id="cb9-9" title="9">      checkmate<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/checkmate/topics/checkIntegerish">assert_integerish</a></span>(evals, <span class="dt">lower =</span> 1L)</a>
<a class="sourceLine" id="cb9-10" title="10">      super<span class="op">$</span><span class="kw">initialize</span>(<span class="dt">id =</span> <span class="st">"GenSA"</span>, <span class="dt">ff =</span> ff, <span class="dt">terminator =</span> TerminatorEvaluations<span class="op">$</span><span class="kw">new</span>(evals),</a>
<a class="sourceLine" id="cb9-11" title="11">        <span class="dt">settings =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">max.call =</span> evals, ...))</a>
<a class="sourceLine" id="cb9-12" title="12">    }</a>
<a class="sourceLine" id="cb9-13" title="13">  ),</a>
<a class="sourceLine" id="cb9-14" title="14">  <span class="dt">private =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb9-15" title="15">    <span class="dt">tune_step =</span> <span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb9-16" title="16">      blackBoxFun =<span class="st"> </span><span class="cf">function</span> (x, ff) {</a>
<a class="sourceLine" id="cb9-17" title="17">        x =<span class="st"> </span>mlr3misc<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/mlr3misc/topics/set_names">set_names</a></span>(x, <span class="dt">nm =</span> ff<span class="op">$</span>param_set<span class="op">$</span><span class="kw">ids</span>())</a>
<a class="sourceLine" id="cb9-18" title="18">        ff<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/eval">eval</a></span>(x)</a>
<a class="sourceLine" id="cb9-19" title="19">        performance =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unlist">unlist</a></span>(ff<span class="op">$</span>bmr<span class="op">$</span>data[.N]<span class="op">$</span>performance)[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb9-20" title="20">        <span class="cf">if</span> (<span class="op">!</span><span class="st"> </span>ff<span class="op">$</span>task<span class="op">$</span>measures[[<span class="dv">1</span>]]<span class="op">$</span>minimize)</a>
<a class="sourceLine" id="cb9-21" title="21">          <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/function">return</a></span> (<span class="op">-</span>performance)</a>
<a class="sourceLine" id="cb9-22" title="22">        <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/function">return</a></span> (performance)</a>
<a class="sourceLine" id="cb9-23" title="23">      }</a>
<a class="sourceLine" id="cb9-24" title="24">      self<span class="op">$</span>GenSA_res =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/GenSA/topics/GenSA">GenSA</a></span>(<span class="dt">fn =</span> blackBoxFun, <span class="dt">lower =</span> self<span class="op">$</span>ff<span class="op">$</span>param_set<span class="op">$</span>lower, <span class="dt">upper =</span> self<span class="op">$</span>ff<span class="op">$</span>param_set<span class="op">$</span>upper,</a>
<a class="sourceLine" id="cb9-25" title="25">        <span class="dt">control =</span> self<span class="op">$</span>settings, <span class="dt">ff =</span> self<span class="op">$</span>ff)</a>
<a class="sourceLine" id="cb9-26" title="26">    }</a>
<a class="sourceLine" id="cb9-27" title="27">  )</a>
<a class="sourceLine" id="cb9-28" title="28">)</a></code></pre></div>
</div>
<div id="run-custom-tuner" class="section level2">
<h2 class="hasAnchor">
<a href="#run-custom-tuner" class="anchor"></a>Run Custom Tuner</h2>
<p>Complete example:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">task =<span class="st"> </span>mlr3<span class="op">::</span>mlr_tasks<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"spam"</span>)</a>
<a class="sourceLine" id="cb10-2" title="2">learner =<span class="st"> </span>mlr3<span class="op">::</span>mlr_learners<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"classif.rpart"</span>)</a>
<a class="sourceLine" id="cb10-3" title="3">learner<span class="op">$</span>predict_type =<span class="st"> "prob"</span></a>
<a class="sourceLine" id="cb10-4" title="4">resampling =<span class="st"> </span>mlr3<span class="op">::</span>mlr_resamplings<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"holdout"</span>)</a>
<a class="sourceLine" id="cb10-5" title="5">measures =<span class="st"> </span>mlr3<span class="op">::</span>mlr_measures<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">mget</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"classif.auc"</span>, <span class="st">"classif.ce"</span>))</a>
<a class="sourceLine" id="cb10-6" title="6">param_set =<span class="st"> </span>paradox<span class="op">::</span>ParamSet<span class="op">$</span><span class="kw">new</span>(</a>
<a class="sourceLine" id="cb10-7" title="7">  <span class="dt">params =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb10-8" title="8">    paradox<span class="op">::</span>ParamDbl<span class="op">$</span><span class="kw">new</span>(<span class="st">"cp"</span>, <span class="dt">lower =</span> <span class="fl">0.001</span>, <span class="dt">upper =</span> <span class="fl">0.1</span>)</a>
<a class="sourceLine" id="cb10-9" title="9">    <span class="co"># paradox::ParamInt$new("minsplit", lower = 2, upper = 5)</span></a>
<a class="sourceLine" id="cb10-10" title="10">  )</a>
<a class="sourceLine" id="cb10-11" title="11">)</a>
<a class="sourceLine" id="cb10-12" title="12"></a>
<a class="sourceLine" id="cb10-13" title="13">ff =<span class="st"> </span>FitnessFunction<span class="op">$</span><span class="kw">new</span>(task, learner, resampling, param_set)</a>
<a class="sourceLine" id="cb10-14" title="14">tuner =<span class="st"> </span>TunerGenSA<span class="op">$</span><span class="kw">new</span>(ff, 60L)</a>
<a class="sourceLine" id="cb10-15" title="15">tuner<span class="op">$</span><span class="kw">tune</span>()</a>
<a class="sourceLine" id="cb10-16" title="16"></a>
<a class="sourceLine" id="cb10-17" title="17">tuner<span class="op">$</span>ff<span class="op">$</span>bmr<span class="op">$</span><span class="kw">aggregated</span>()</a>
<a class="sourceLine" id="cb10-18" title="18">tuner<span class="op">$</span><span class="kw">tune_result</span>()</a>
<a class="sourceLine" id="cb10-19" title="19"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(tuner<span class="op">$</span>GenSA_res)</a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#basis-of-tuning">Basis of Tuning</a></li>
      <li><a href="#define-objective">Define Objective</a></li>
      <li><a href="#call-the-optimizer">Call the Optimizer</a></li>
      <li><a href="#terminator-of-custom-tuner">Terminator of Custom Tuner</a></li>
      <li><a href="#write-new-class">Write New Class</a></li>
      <li><a href="#run-custom-tuner">Run Custom Tuner</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><!--<div class="copyright">
  <p>Developed by Jakob Richter, Bernd Bischl, Michel Lang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
--></footer>
</div>

   

  </body>
</html>
